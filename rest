import asyncio, aiohttp, os, urllib.parse, re, random, binascii, uuid, time, hashlib, string, json, base64
from MedoSigner import Argus, Gorgon, Ladon, md5

P  = '\x1b[1;97m'       # Ø£Ø¨ÙŠØ¶ ÙØ§ØªØ­
B  = '\x1b[1;94m'       # Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­
O  = '\x1b[1;96m'       # Ø³Ù…Ø§ÙˆÙŠ (Ø£Ø²Ø±Ù‚ Ù…Ø§Ø¦Ù„ Ù„Ù„ØªØ±ÙƒÙˆØ§Ø²ÙŠ)
Z  = "\033[1;30m"       # Ø£Ø³ÙˆØ¯ ØºØ§Ù…Ù‚
X  = '\033[1;33m'       # Ø£ØµÙØ±
F  = '\033[2;32m'       # Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚
Z  = '\033[1;31m'       # Ø£Ø­Ù…Ø±
L  = "\033[1;95m"       # Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ
C  = '\033[2;35m'       # ÙˆØ±Ø¯ÙŠ ØºØ§Ù…Ù‚
A  = '\033[2;39m'       # Ø£Ø²Ø±Ù‚ Ø±Ù…Ø§Ø¯ÙŠ
P  = "\x1b[38;5;231m"   # Ø£Ø¨ÙŠØ¶ Ù†Ø§ØµØ¹ (Putih)
J  = "\x1b[38;5;208m"   # Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ (Jingga)
J1 = '\x1b[38;5;202m'   # Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ØºØ§Ù…Ù‚
J2 = '\x1b[38;5;203m'   # ÙˆØ±Ø¯ÙŠ ÙØ§ØªØ­
J21= '\x1b[38;5;204m'   # ÙˆØ±Ø¯ÙŠ Ù…ØªÙˆØ³Ø·
J22= '\x1b[38;5;209m'   # ÙˆØ±Ø¯ÙŠ ÙØ§ØªØ­ Ù…Ø´Ø¹
F1 = '\x1b[38;5;76m'    # Ø£Ø®Ø¶Ø± Ø²Ù…Ø±Ø¯ÙŠ
C1 = '\x1b[38;5;120m'   # Ø£Ø®Ø¶Ø± ÙØ§ØªØ­
P1 = '\x1b[38;5;150m'   # Ø£Ø®Ø¶Ø± Ù…Ø§Ø¦Ù„ Ù„Ù„Ø£Ø²Ø±Ù‚ (ÙØ³ÙÙˆØ±ÙŠ)
P2 = '\x1b[38;5;190m'   # Ø£Ø®Ø¶Ø± Ù„ÙŠÙ…ÙˆÙ†ÙŠ
sd = random.choice([J1, J2, J21, J22, F1, C1, P1, P2])

print(f"{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬")
print(sd + f"""
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
{sd}      â•šâ•â•  â•šâ•â• â•šâ•â•      â•šâ•â•  â•šâ•â• â•šâ•â•    â•šâ•â•
        {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸ {J22} F-Trind-V2 {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸
                {F}TLE :   @oo22bb
    """)
print(f"""{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬
    {X}[{F}1{X}] {P1}Countries-Specific
    {X}[{F}2{X}] {P1}Countries-All
    {X}[{F}3{X}] {P1}Random
    {X}[{F}4{X}] {P1}Following
    {X}[{F}5{X}] {P1}INDIA-ğŸ‡®ğŸ‡³
    {X}[{F}6{X}] {P1}JAPAN-ğŸ‡¯ğŸ‡µ
    {X}[{F}7{X}] {P1}KOREA-ğŸ‡°ğŸ‡· ğŸ‡°ğŸ‡µ
    {X}[{F}8{X}] {P1}CHINA-ğŸ‡¨ğŸ‡³""")

lis = input(f'    {X}[{F}Ã—{X}] {Z}Choose : ')

if lis == '1':
    country = ['India', 'Vietnam', 'Korea', 'Japan', 'China', 'Indonesia']
elif lis == '2':
    country = 'All'
elif lis == '3':
    country = 'Random'
elif lis == '4':
    import aiohttp, asyncio, random, time, uuid, string, hashlib, base64, json, ms4, re, os

    ss = {}

    def rn(l=10):
        return ''.join(random.choice(string.digits) for _ in range(l))

    def rh(l=32):
        return ''.join(random.choice('0123456789abcdef') for _ in range(l))

    def ru():
        return str(uuid.uuid4())

    def ra():
        br = ["Infinix", "Samsung", "Xiaomi", "Huawei", "Realme", "Oppo", "Vivo", "Tecno"]
        mo = ["X692", "A52", "M21", "Note9", "Y20", "C25", "F17", "P30"]
        av = ["10", "11", "12", "13"]
        bv = ["QP1A.190711.020", "RP1A.200720.011", "TP1A.220905.001", "SP1A.210812.016"]
        return f"com.zhiliaoapp.musically.go/370402 (Linux; U; Android {random.choice(av)}; ar; {random.choice(br)} {random.choice(mo)}; Build/{random.choice(bv)}; tt-ok/3.12.13.27-ul)"

    def gx(ts):
        b = hashlib.md5(str(ts).encode()).hexdigest()
        return "8404" + b[:30]

    def ga(ts, di, ii):
        r = f"{di}:{ii}:{ts}"
        h = hashlib.sha256(r.encode()).digest()
        return base64.b64encode(h).decode()

    def gp(pd):
        e = json.dumps(pd, separators=(',', ':')).encode()
        return base64.b64encode(e).decode()

    async def pu(dk, ui):
        try:
            m = ms4.InfoTik.TikTok_Info(dk)
            ui_ = m["id"]
            up = f'https://www.tiktok.com/@{dk}'
            async with aiohttp.ClientSession() as s:
                async with s.get(up, headers={'User-Agent': 'Mozilla/5.0'}) as r:
                    rt = await r.text()
            su = re.search(r'"secUid":"([^"]+)"', rt).group(1)
            ii = rn(19)
            di = rn(19)
            cd = ru()
            ou = rh(16)
            sn = set()
            au = []
            pt = ""
            mt = ""
            tc = 0
            while True:
                ts = int(time.time())
                ua = ra()
                hd = {'User-Agent': ua, 'Accept-Encoding': "gzip", 'rpc-persist-pyxis-policy-v-tnc': "1", 'x-ss-dp': "1340", 'x-tt-req-timeout': "90000", 'sdk-version': "2", 'x-tt-token': rh(96), 'passport-sdk-version': "30990", 'x-tt-ultra-lite': "1", 'x-vc-bdturing-sdk-version': "2.3.2.i18n", 'x-tt-store-region': "iq", 'x-tt-store-region-src': "uid", 'x-ladon': rh(64), 'x-khronos': str(ts), 'x-argus': ga(ts, di, ii), 'x-gorgon': gx(ts), 'X-Tt-Params': gp({"iid": ii, "device_id": di, "cdid": cd, "ts": ts, "version": "37.4.2", "region": "IQ"}), 'Cookie': f"install_id={ii}; device_id={di}; odin_tt={rh(64)}; sessionid={rh(32)}"}
                url = f"https://api16-normal-c-alisg.tiktokv.com/lite/v2/relation/following/list/?sss-network-channel={rn(13)}&user_id={ui_}&count=200&page_token={pt}&max_time={mt}&source_type=4&request_tag_from=h5&sec_user_id={su}&manifest_version_code=370402&_rticket={rn(13)}&app_language=ar&app_type=normal&iid={ii}&app_package=com.zhiliaoapp.musically.go&channel=googleplay&device_type=Infinix+X692&language=ar&host_abi=arm64-v8a&locale=ar&resolution=720*1464&openudid={ou}&update_version_code=370402&ac2=wifi&cdid={cd}&sys_region=EG&os_api=29&timezone_name=Asia%2FBaghdad&dpi=320&carrier_region=IQ&ac=wifi&device_id={di}&os_version=10&timezone_offset=10800&version_code=370402&app_name=musically_go&ab_version=37.4.2&version_name=37.4.2&device_brand=Infinix&op_region=IQ&ssmix=a&device_platform=android&build_number=37.4.2&region=EG&aid=1340&ts={ts}"
                try:
                    async with aiohttp.ClientSession(timeout=aiohttp.ClientTimeout(total=30)) as session:
                        async with session.get(url, headers=hd) as resp:
                            rs = await resp.json()
                    us = [item['unique_id'] for item in rs.get('followings', [])]
                    for u in us:
                        if u not in sn:
                            sn.add(u)
                            au.append(u)
                            tc += 1
                    if not rs.get("has_more"):
                        break
                    pt = rs.get("next_page_token", "")
                    mt = rs.get("min_time", "")
                except:
                    break
                await asyncio.sleep(1)  # ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± 1 Ø«Ø§Ù†ÙŠØ©
            with open(f"list.txt", "a", encoding="utf-8") as f:
                for u in au:
                    f.write(u + "\n")
        except:
            pass

    async def main():
        os.system('clear')
        print(f"{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬")
        print(sd + f"""
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
{sd}      â•šâ•â•  â•šâ•â• â•šâ•â•      â•šâ•â•  â•šâ•â• â•šâ•â•    â•šâ•â•
        {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸ {J22} F-Trind-V2 {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸
                {F}TLE :   @oo22bb
    """)
        print(f"""{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬""")

        user = input("User : ").strip()
        if not user:
            return

        of = "list.txt"
        if os.path.exists(of):
            os.remove(of)

        await pu(user, "user")

        if os.path.exists(of):
            with open(of, "r", encoding="utf-8") as f:
                users = f.read().strip().split("\n")

            os.system('clear')
            print(f"{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬")
            print(sd + f"""
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
{sd}      â•šâ•â•  â•šâ•â• â•šâ•â•      â•šâ•â•  â•šâ•â• â•šâ•â•    â•šâ•â•
        {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸ {J22} F-Trind-V2 {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸
                {F}TLE :   @oo22bb
    """)
            print(f"""{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬""")
            print(f"{Z}Get {P}- {L}List {P}[ {P2}{len(users)}{P} ]")

            for u in users:
                print(u)
        else:
            print("Username not found")

    asyncio.run(main())

elif lis == '5':
    country = 'India'
elif lis == '6':
    country = 'Japan'
elif lis == '7':
    country = 'Korea'
elif lis == '8':
    country = 'China'

if lis in ['1', '2', '3', '5', '6', '7', '8']:
    a = 0
    users = set()
    user_queue = asyncio.Queue()
    lock = asyncio.Lock()

    def Vals():
        return {
            "manifest_version_code": "330802",
            "_rticket": str(round(random.uniform(1.2, 1.6) * 100000000) * -1) + "4632",
            "app_language": "ar",
            "app_type": "normal",
            "iid": str(random.randint(1, 10 ** 19)),
            "channel": "googleplay",
            "device_type": "RMX3511",
            "language": "ar",
            "host_abi": "arm64-v8a",
            "locale": "ar",
            "resolution": "1080*2236",
            "openudid": str(binascii.hexlify(os.urandom(8)).decode()),
            "update_version_code": "330802",
            "ac2": "lte",
            "cdid": str(uuid.uuid4()),
            "sys_region": "IQ",
            "os_api": "33",
            "timezone_name": "Asia/Baghdad",
            "dpi": "360",
            "carrier_region": "IQ",
            "ac": "4g",
            "device_id": str(random.randint(1, 10 ** 19)),
            "os_version": "13",
            "timezone_offset": "10800",
            "version_code": "330802",
            "app_name": "musically_go",
            "ab_version": "33.8.2",
            "version_name": "33.8.2",
            "device_brand": "realme",
            "op_region": "IQ",
            "ssmix": "a",
            "device_platform": "android",
            "build_number": "33.8.2",
            "region": "IQ",
            "aid": "1340",
            "ts": str(round(random.uniform(1.2, 1.6) * 100000000) * -1)
        }, {
            'User-Agent': 'com.zhiliaoapp.musically/2023001020 (Linux; U; Android 13; ar; RMX3511; Build/TP1A.220624.014; Cronet/TTNetVersion:06d6a583 2023-04-17 QuicVersion:d298137e 2023-02-13)'
        }

    def sign(params, payload: str = None, sec_device_id: str = "", cookie: str = None,
             aid: int = 1233, license_id: int = 1611921764, sdk_version_str: str = "2.3.1.i18n",
             sdk_version: int = 2, platform: int = 19, unix: int = None):
        x_ss_stub = md5(payload.encode('utf-8')).hexdigest() if payload is not None else None
        if not unix:
            unix = int(time.time())
        return Gorgon(params, unix, payload, cookie).get_value() | {
            "x-ladon": Ladon.encrypt(unix, license_id, aid),
            "x-argus": Argus.get_sign(params, x_ss_stub, unix, platform=platform, aid=aid,
                                      license_id=license_id, sec_device_id=sec_device_id,
                                      sdk_version=sdk_version_str, sdk_version_int=sdk_version)
        }

    async def get_following(session, user_id):
        global users, a
        token = None
        while True:
            try:
                p, h = Vals()
                signed = sign(params=urllib.parse.urlencode(p), payload="", cookie="")
                h.update({
                    'x-ss-req-ticket': signed['x-ss-req-ticket'],
                    'x-argus': signed["x-argus"],
                    'x-gorgon': signed["x-gorgon"],
                    'x-khronos': signed["x-khronos"],
                    'x-ladon': signed["x-ladon"]
                })
                base_url = f'https://api16-normal-c-alisg.tiktokv.com/lite/v2/relation/following/list/?user_id={user_id}&count=50&source_type=1&request_tag_from=h5&{urllib.parse.urlencode(p)}'
                if token:
                    base_url += f"&page_token={urllib.parse.quote(token)}"
                try:
                    async with session.get(base_url, headers=h, timeout=aiohttp.ClientTimeout(total=30)) as response:
                        data = await response.json()
                except:
                    break

                for user in data.get("followings", []):
                    reg = user.get("region")
                    fol = user.get("follower_count")
                    username = user.get("unique_id")
                    async with lock:
                        if username:
                            if int(fol) > 0 and username not in users:
                                a += 1
                                users.add(username)
                                os.system('clear')
                                print(f"{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬")
                                print(sd + f"""
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘
{sd}      â•šâ•â•  â•šâ•â• â•šâ•â•      â•šâ•â•  â•šâ•â• â•šâ•â•    â•šâ•â•
        {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸ {J22} F-Trind-V2 {X}Â¸.â€¢Â´Â¯`â€¢.Â¸Â¸
                {F}TLE :   @oo22bb
    """)
                                print(f"""{J} â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{C1}â–¬â–¬{J22}Ä€â‚£Å”ÎÅ¦{C1}â–¬â–¬{P}â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬â–¬{J}â–¬â–¬""")
                                print(f"{Z}Get {P}- {L}List {P}[{P2}{a}{P}]", end="", flush=True)
                                with open("list.txt", "a", encoding="utf-8") as f:
                                    f.write(username + "\n")
                if not data.get("has_more"):
                    break
                token = data.get("next_page_token")
                if not token:
                    break
            except Exception:
                break
            await asyncio.sleep(1)  # ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± 1 Ø«Ø§Ù†ÙŠØ©

    async def info(session, username):
        global users
        headers = {
            "user-agent": "Mozilla/5.0 (Windows NT 10.0; Android 10; Pixel 3 Build/QKQ1.200308.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/125.0.6394.70 Mobile Safari/537.36 trill_350402 JsSdk/1.0 NetType/MOBILE Channel/googleplay AppName/trill app_version/35.3.1 ByteLocale/en ByteFullLocale/en Region/IN AppId/1180 Spark/1.5.9.1 AppVersion/35.3.1 BytedanceWebview/d8a21c6"
        }
        try:
            async with session.get(f'https://www.tiktok.com/@{username}', headers=headers, timeout=aiohttp.ClientTimeout(total=30)) as resp:
                tikinfo = await resp.text()
            info = str(tikinfo.split('webapp.user-detail"')[1]).split('"RecommendUserList"')[0]
            try:
                user_id = str(info.split('id":"')[1]).split('",')[0]
                following = str(info.split('followingCount":')[1]).split(',"')[0]
                country = str(info.split('region":"')[1]).split('",')[0]
                async with lock:
                    if country in ['MX', 'NG', 'VE', 'MM', 'UG', 'ID', 'GH'] and username not in users and int(following) >= 5000:
                        users.add(username)
                        await user_queue.put(user_id)
            except:
                pass
        except:
            pass
        await asyncio.sleep(1)  # ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± 1 Ø«Ø§Ù†ÙŠØ©

    def V12():
        kew = random.choice(['abcdefghijklmnopqrstuvwxyz', 'abcdefghijklmnopqrstuvwxyzÃ±Ã¡Ã©Ã­Ã³ÃºÃ¼', 'abcdefghijklmnopqrstuvwxyzá¹£á»áº¹Ì€Ã¡Ã©Ã­Ã³Ãº', 'abcdefghijklmnopqrstuvwxyzÃ±Ã¡Ã©Ã­Ã³ÃºÃ¼', 'á€€á€á€‚á€ƒá€„á€…á€†á€‡á€ˆá€‰á€Šá€á€‘á€’á€“á€”á€•á€–á€—á€˜á€™á€šá€›á€œá€á€á€Ÿá€ á€¡', 'abcdefghijklmnopqrstuvwxyzÉ›É”Å‹'])
        k = ''.join((random.choice(kew) for i in range(random.randrange(2, 9))))
        return k

    async def search(session):
        while True:
            try:
                username = V12()
                url = "https://search16-normal-c-alisg.tiktokv.com/aweme/v1/search/user/sug/?iid=" + str(
                    random.randint(1, 10 ** 19)) + "&device_id=" + str(random.randint(1, 10 ** 19)) + "&ac=wifi&channel=googleplay&aid=1233&app_name=musical_ly&version_code=300102&version_name=30.1.2&device_platform=android&os=android&ab_version=30.1.2&ssmix=a&device_type=RMX3511&device_brand=realme&language=ar&os_api=33&os_version=13&openudid=" + str(
                    binascii.hexlify(os.urandom(8)).decode()) + "&manifest_version_code=2023001020&resolution=1080*2236&dpi=360&update_version_code=2023001020&_rticket=" + str(
                    round(random.uniform(1.2, 1.6) * 100000000) * -1) + "4632" + "&current_region=IQ&app_type=normal&sys_region=IQ&mcc_mnc=41805&timezone_name=Asia%2FBaghdad&carrier_region_v2=418&residence=IQ&app_language=ar&carrier_region=IQ&ac2=wifi&uoo=0&op_region=IQ&timezone_offset=10800&build_number=30.1.2&host_abi=arm64-v8a&locale=ar&region=IQ&content_language=gu%2C&ts=" + str(
                    round(random.uniform(1.2, 1.6) * 100000000) * -1) + "&cdid=" + str(uuid.uuid4()) + ""
                payload = {
                    'keyword': username,
                    'count': "100",
                    'source': "tt_ffp_add_friends",
                    'mention_type': "0"}
                headers = {'Host': 'search16-normal-c-alisg.tiktokv.com',
                           'User-Agent': "com.zhiliaoapp.musically/2023105030 (Linux; U; Android 13; ar_IQ; RMX3511; Build/TP1A.220624.014; Cronet/TTNetVersion:2fdb62f9 2023-09-06 QuicVersion:bb24d47c 2023-07-19)"}
                headers.update(sign(url.split('?')[1], payload=urllib.parse.urlencode(payload)))
                try:
                    async with session.post(url, data=payload, headers=headers, timeout=aiohttp.ClientTimeout(total=30)) as response:
                        data = await response.json()
                except:
                    continue

                ids = [
                    item["extra_info"].get("sug_uniq_id")
                    for item in data.get("sug_list", [])
                    if "extra_info" in item
                       and "sug_uniq_id" in item["extra_info"]
                       and re.fullmatch(r"[A-Za-z0-9_]+", item["extra_info"]["sug_uniq_id"])
                ]
                for user in ids:
                    await info(session, user)
            except Exception as e:
                pass
            await asyncio.sleep(1)  # ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± 1 Ø«Ø§Ù†ÙŠØ©

    async def worker(session):
        while True:
            try:
                user_id = await user_queue.get()
                await get_following(session, user_id)
                user_queue.task_done()
            except Exception:
                pass
            await asyncio.sleep(1)

    async def main():
        async with aiohttp.ClientSession(timeout=aiohttp.ClientTimeout(total=30)) as session:
            workers = [asyncio.create_task(worker(session)) for _ in range(5)]
            searches = [asyncio.create_task(search(session)) for _ in range(5)]

            await asyncio.gather(*workers, *searches)

    if __name__ == '__main__':
        asyncio.run(main())
